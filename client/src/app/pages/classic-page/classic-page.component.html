<head>
    <meta charset="UTF-8" />
    <title>Jeu classic</title>
</head>
<body>
    <div class="flex-row center header">
        <app-quit-button (click)="onQuitGame()"></app-quit-button>
        <h1 class="titre">{{ this.gameTitle }}</h1>
        <app-hint (click)="handleHintMode()"></app-hint>
        <app-hint (click)="handleHintMode()" #hintElement *ngIf="isSolo || isLimitedTimeSolo"></app-hint>
    </div>

    <div class="flex-column center">
        <div class="flex-row center data-container">
            <div class="flex-row difference-container">
                <app-found-differences-counter
                    class="hints-container"
                    [username]="isCoop ? this.getPlayerUsername(true) + ' et ' + this.getPlayerUsername(false) : this.getPlayerUsername(true)"
                    [differencesFound]="differencesFound1"
                    [differencesNbr]="currentGameId !== '-1' ? (isOneVersusOne ? minDifferences : totalDifferences) : -1"
                    [ngClass]="{
                        currentPlayer: activePlayer
                    }"
                ></app-found-differences-counter>
                <app-found-differences-counter
                    class="hints-container"
                    *ngIf="isOneVersusOne && currentGameId !== '-1'"
                    [username]="this.getPlayerUsername(false)"
                    [differencesFound]="differencesFound2"
                    [differencesNbr]="isOneVersusOne ? minDifferences : totalDifferences"
                    [ngClass]="{
                        currentPlayer: !activePlayer
                    }"
                ></app-found-differences-counter>
            </div>
            <div class="timer-container">
                <div #penalty class="penalty-message">Penalit√© : +10s</div>
                <app-timer
                    #timerElement
                    [incrementTime]="currentGameId !== '-1'"
                    (timeReachedZero)="onWinGame(getPlayerUsername(true), !this.isWinByDefault)"
                ></app-timer>
            </div>
        </div>
        <app-info-card class="info-card" *ngIf="games" [isEasy]="false" [matchType]="this.currentMatchType"></app-info-card>
        <div #cheatElement tabindex="0" [ngStyle]="{ 'background-color': this.canvasHandlingService.backgroundColor }" class="cheat-mode">
            Mode triche
        </div>

        <div class="flex-row center canvas-container">
            <canvas #originalImage width="640px" height="480px" (mousedown)="this.onMouseDown($event)"></canvas>
            <canvas #modifiedImage width="640px" height="480px" (mousedown)="this.onMouseDown($event)"></canvas>
        </div>

        <app-chat #chat class="chat-container"></app-chat>
        <div *ngIf="replayModeService.shouldShowReplayModeGUI">
            <p>REPLAY {{ replayModeService.currentStatus }} | Speed: {{ replayModeService.replaySpeed }}</p>

            <button class="button-style center" title="Restart Replay" (click)="this.replayModeService.togglePauseReplayMode()">
                <p>{{ replayModeService.isReplayModePaused ? 'Play' : 'Pause' }}</p>
            </button>

            <button class="button-style center" title="Restart Replay" (click)="this.replayModeService.launchReplayMode()">
                <p>Restart Replay</p>
            </button>

            <p>Speed</p>
            <select #radiusInput class="button-style" [(ngModel)]="replayModeService.replaySpeed">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="4">4</option>
            </select>
        </div>
    </div>

    <div #errorMessage class="error-message">ERREUR</div>
    <app-pop-up #popUpElement></app-pop-up>
    <audio #successSound src="./assets/sound/success2.mp3"></audio>
    <audio #errorSound src="./assets/sound/fail2.mp3"></audio>
</body>
